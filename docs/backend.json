{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Daily Script app.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "authProvider": {
          "type": "string",
          "description": "The authentication provider used by the user (e.g., Google, Apple, anonymous)."
        },
        "notificationPreferences": {
          "type": "string",
          "description": "User preferences for push notifications (e.g., daily, off)."
        },
        "bibleVersionPreference": {
          "type": "string",
          "description": "User's preferred Bible version (e.g., KJV, NIV, ESV)."
        },
        "darkModePreference": {
          "type": "boolean",
          "description": "User preference for dark mode."
        },
        "isPremium": {
          "type": "boolean",
          "description": "Indicates if the user has paid to remove ads."
        }
      },
      "required": [
        "id"
      ]
    },
    "Verse": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Verse",
      "type": "object",
      "description": "Represents a Bible verse.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Verse entity."
        },
        "text": {
          "type": "string",
          "description": "The text of the Bible verse."
        },
        "book": {
          "type": "string",
          "description": "The book of the Bible the verse is from (e.g., Genesis)."
        },
        "chapter": {
          "type": "number",
          "description": "The chapter number the verse is from."
        },
        "verseNumber": {
          "type": "number",
          "description": "The verse number within the chapter."
        },
        "bibleVersion": {
          "type": "string",
          "description": "The Bible version the verse is from (e.g., KJV, NIV, ESV)."
        }
      },
      "required": [
        "id",
        "text",
        "book",
        "chapter",
        "verseNumber",
        "bibleVersion"
      ]
    },
    "FavoriteVerse": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "FavoriteVerse",
      "type": "object",
      "description": "Represents a Bible verse favorited by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the FavoriteVerse entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N FavoriteVerse)"
        },
        "verseId": {
          "type": "string",
          "description": "Reference to Verse. (Relationship: Verse 1:N FavoriteVerse)"
        },
        "dateAdded": {
          "type": "string",
          "description": "The date the verse was added to favorites.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "verseId",
        "dateAdded"
      ]
    },
    "DailyVerse": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DailyVerse",
      "type": "object",
      "description": "Represents the verse of the day.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the DailyVerse entity."
        },
        "verseId": {
          "type": "string",
          "description": "Reference to Verse. (Relationship: Verse 1:N DailyVerse)"
        },
        "date": {
          "type": "string",
          "description": "The date for which this verse is the daily verse.",
          "format": "date"
        }
      },
      "required": [
        "id",
        "verseId",
        "date"
      ]
    },
    "Reflection": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Reflection",
      "type": "object",
      "description": "Represents an AI-powered reflection on a Bible verse.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Reflection entity."
        },
        "verseId": {
          "type": "string",
          "description": "Reference to Verse. (Relationship: Verse 1:N Reflection)"
        },
        "reflectionText": {
          "type": "string",
          "description": "The text of the AI-powered reflection."
        },
        "dateCreated": {
          "type": "string",
          "description": "The date the reflection was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "verseId",
        "reflectionText",
        "dateCreated"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile data. Path-based ownership ensures only the user can access their own data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/favoriteVerses/{favoriteVerseId}",
        "definition": {
          "entityName": "FavoriteVerse",
          "schema": {
            "$ref": "#/backend/entities/FavoriteVerse"
          },
          "description": "Stores verses favorited by a user. Path-based ownership ensures only the user can access their own favorited verses.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            },
            {
              "name": "favoriteVerseId",
              "description": "The unique identifier of the favorite verse."
            }
          ]
        }
      },
      {
        "path": "/verses/{verseId}",
        "definition": {
          "entityName": "Verse",
          "schema": {
            "$ref": "#/backend/entities/Verse"
          },
          "description": "Stores Bible verse data. Publicly readable.",
          "params": [
            {
              "name": "verseId",
              "description": "The unique identifier of the verse."
            }
          ]
        }
      },
      {
        "path": "/dailyVerses/{date}",
        "definition": {
          "entityName": "DailyVerse",
          "schema": {
            "$ref": "#/backend/entities/DailyVerse"
          },
          "description": "Stores the verse of the day. Document ID is equal to the date. Publicly readable.",
          "params": [
            {
              "name": "date",
              "description": "The date for which this is the daily verse (YYYY-MM-DD)."
            }
          ]
        }
      },
      {
        "path": "/reflections/{reflectionId}",
        "definition": {
          "entityName": "Reflection",
          "schema": {
            "$ref": "#/backend/entities/Reflection"
          },
          "description": "Stores AI-powered reflections on Bible verses. Publicly readable.",
          "params": [
            {
              "name": "reflectionId",
              "description": "The unique identifier of the reflection."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to address the error reported (Firebase Auth configuration not found) and to support the app's core features with a focus on security, scalability, and debuggability. The structure prioritizes authorization independence, clarity of intent, and adherence to DBAC principles (Database Based Access Control).  Path-based ownership is leveraged for private user data (e.g., favorite verses). The 'DailyVerse' collection uses document IDs equal to the date for easy access and to ensure only one daily verse exists per day. The structure supports QAPs by segregating data based on access requirements and leveraging path-based ownership for user-specific data. The structure also facilitates the storage and retrieval of AI-powered reflections on Bible verses. This design eliminates the need for complex security rules by ensuring data is stored in a way that naturally aligns with access control requirements, making the rules simpler to write and easier to debug."
  }
}